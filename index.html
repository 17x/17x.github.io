<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="古岂无人，孤标凌云谁与朋。高冢笑卧，春秋一阕任琦行">
<meta property="og:type" content="website">
<meta property="og:title" content="明从暗出，净自秽生">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="明从暗出，净自秽生">
<meta property="og:description" content="古岂无人，孤标凌云谁与朋。高冢笑卧，春秋一阕任琦行">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="明从暗出，净自秽生">
<meta name="twitter:description" content="古岂无人，孤标凌云谁与朋。高冢笑卧，春秋一阕任琦行">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>

  <title> 明从暗出，净自秽生 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">明从暗出，净自秽生</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">17x</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/18/wireless-touch-event/" itemprop="url">
                  wireless touch event
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-18T11:14:11+08:00" content="2016-03-18">
              2016-03-18
            </time>
          </span>

          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="无线端自定义触摸事件"><a href="#无线端自定义触摸事件" class="headerlink" title="无线端自定义触摸事件"></a>无线端自定义触摸事件</h2><hr>
<p><strong><em> 基于zepto.js的touch组件修改 </em></strong><br><strong><em> zepto的touch组件有一些bug，而animate组件在部分android系统上运行帧数很低。 </em></strong></p>
<p>需要实现的功能有: <code>tap(轻按)</code>  、 <code>longTap(长按)</code>  、 <code>dblTap(双击)</code>  、 <code>swipe(滑动，不限方向)</code>  、 <code>swipeLeft(左滑动)</code>  、 <code>swipeRight(右滑动)</code>  、 <code>swipeUp(上滑动)</code>  、 <code>swipeDown(下滑动)</code></p>
<p>功能都基于四个原生事件实现： <code>touchstart</code>、<code>touchmove</code>、<code>touchend</code>、<code>touchcancel</code><br><img src="\uploads/touch-axure.jpg" alt="big"></p>
<h3 id="一开始，我们定义一个匿名自执行函数，并定义一些位于此作用域链顶端的局部变量"><a href="#一开始，我们定义一个匿名自执行函数，并定义一些位于此作用域链顶端的局部变量" class="headerlink" title="一开始，我们定义一个匿名自执行函数，并定义一些位于此作用域链顶端的局部变量"></a>一开始，我们定义一个匿名自执行函数，并定义一些位于此作用域链顶端的局部变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    var touch = &#123;&#125;, <span class="comment">#预定义对象，用来存储触摸的相关属性和值</span></span><br><span class="line">        longTapDelay = 750, <span class="comment">#预定义长按延时，超过此数值则判定为longTap</span></span><br><span class="line">        touchTimeout, <span class="comment">#触摸延迟定时器，等待双击判定。</span></span><br><span class="line">        longTapTimeout <span class="comment">#长按定时器，等待长按判定。	</span></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p><strong> 代码始终位于 <code>;(function()</code> { 之后 和 <code>})()</code> 之前 </strong><br><strong> 重复的代码不再显示，用……替代 </strong></p>
<h3 id="首先给window绑定onload事件，并预定义变量"><a href="#首先给window绑定onload事件，并预定义变量" class="headerlink" title="首先给window绑定onload事件，并预定义变量:"></a>首先给window绑定onload事件，并预定义变量:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">window.addEventListener(<span class="string">'load'</span>, <span class="function"><span class="title">function</span></span>() &#123;    	</span><br><span class="line">    var now,<span class="comment">#触摸时候的时间</span></span><br><span class="line">        delta,<span class="comment">#时间增量</span></span><br><span class="line">        deltaX = 0,<span class="comment">#位移X</span></span><br><span class="line">        deltaY = 0,<span class="comment">#位移Y</span></span><br><span class="line">        firstTouch	<span class="comment">#第一个触点</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="给document绑定touchstart事件"><a href="#给document绑定touchstart事件" class="headerlink" title="给document绑定touchstart事件:"></a>给document绑定touchstart事件:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#手指触碰到屏幕的第一瞬间</span></span><br><span class="line">document.addEventListener(<span class="string">'touchstart'</span>, <span class="keyword">function</span>(e) &#123;</span><br><span class="line">    <span class="comment">#判断是否支持e.touches，并且当前只有一个手指触摸。</span></span><br><span class="line">    <span class="keyword">if</span> (e.touches &amp;&amp; e.touches.length === 1) &#123;</span><br><span class="line">        <span class="comment">#更新本次点击时间</span></span><br><span class="line">        now = Date.now()</span><br><span class="line">        <span class="comment">#判断如果存在上次点击，计算时间增量</span></span><br><span class="line">        delta = now - (touch.last || now)</span><br><span class="line">        <span class="comment">#当用户在短时间内点击了第二次，并允许出现半径2.5个单位的位置偏移</span></span><br><span class="line">        <span class="comment">#时间增量大于0ms而小于250ms，判定为doubleTap</span></span><br><span class="line">        <span class="keyword">if</span> (delta &gt; 0 &amp;&amp; delta &lt;= 300 &amp;&amp; Math.abs(touch.x1 - e.touches[0].pageX) &lt; 5 &amp;&amp; Math.abs(touch.y1 - e.touches[0].pageY) &lt; 5) &#123;</span><br><span class="line">            touch.isDoubleTap = <span class="literal">true</span></span><br><span class="line">        &#125;        </span><br><span class="line">        <span class="comment">#更新触点</span></span><br><span class="line">        firstTouch = e.touches[0]</span><br><span class="line">        <span class="comment">#更新target.el</span></span><br><span class="line">        touch.el = <span class="string">'tagName'</span> <span class="keyword">in</span> firstTouch.target ? firstTouch.target : firstTouch.target.parentNode</span><br><span class="line">        <span class="comment">#更新touch.x1(本次点击的X坐标)</span></span><br><span class="line">        touch.x1 = firstTouch.pageX</span><br><span class="line">        <span class="comment">#更新touch.y1(本次点击的Y坐标)</span></span><br><span class="line">        touch.y1 = firstTouch.pageY</span><br><span class="line">        <span class="comment">#清除长按定时器(如果有上一次触控动作，那么就放弃定时，没有也要清空)</span></span><br><span class="line">        longTapTimeout = null</span><br><span class="line">        <span class="comment">#清除长按定时器(自本次动作开始进行长按倒计时)</span></span><br><span class="line">        longTapTimeout = <span class="built_in">set</span>Timeout(longTap, longTapDelay)</span><br><span class="line">        <span class="comment">#更新 '上次点击时间',以备判断双击事件</span></span><br><span class="line">        touch.last = now</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="此时手指依然停留在屏幕上，接下来的情况可能有"><a href="#此时手指依然停留在屏幕上，接下来的情况可能有" class="headerlink" title="此时手指依然停留在屏幕上，接下来的情况可能有:"></a>此时手指依然停留在屏幕上，接下来的情况可能有:</h3><ol>
<li><strong> 开始在屏幕上移动，在移动一段距离后离开屏幕，然后进行swipe判断 </strong></li>
<li><strong> 直接离开屏幕(不移动)，进行下一步的判断：dblTap或tap </strong></li>
<li><strong> 保持按住的动作并持续到750ms，也就是上面代码中已经开启了的定时器longTapTimeout，触发longTap； </strong></li>
<li><strong> (可能)保持长按触发浏览器长按菜单,如:复制文本,并触发touchcancel </strong></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#手指触碰到屏幕的第一瞬间</span></span><br><span class="line">document.addEventListener(<span class="string">'touchstart'</span>, <span class="keyword">function</span>(e) &#123;</span><br><span class="line">    <span class="comment">#判断是否支持e.touches，并且当前只有一个手指触摸。</span></span><br><span class="line">    <span class="keyword">if</span> (e.touches &amp;&amp; e.touches.length === 1) &#123;</span><br><span class="line">        <span class="comment">#更新本次点击时间</span></span><br><span class="line">        now = Date.now()</span><br><span class="line">        <span class="comment">#判断如果存在上次点击，计算时间增量</span></span><br><span class="line">        delta = now - (touch.last || now)</span><br><span class="line">        <span class="comment">#当用户在短时间内点击了第二次，并允许出现半径2.5个单位的位置偏移</span></span><br><span class="line">        <span class="comment">#时间增量大于0ms而小于250ms，判定为doubleTap</span></span><br><span class="line">        <span class="keyword">if</span> (delta &gt; 0 &amp;&amp; delta &lt;= 300 &amp;&amp; Math.abs(touch.x1 - e.touches[0].pageX) &lt; 5 &amp;&amp; Math.abs(touch.y1 - e.touches[0].pageY) &lt; 5) &#123;</span><br><span class="line">            touch.isDoubleTap = <span class="literal">true</span></span><br><span class="line">        &#125;        </span><br><span class="line">        <span class="comment">#更新触点</span></span><br><span class="line">        firstTouch = e.touches[0]</span><br><span class="line">        <span class="comment">#更新target.el</span></span><br><span class="line">        touch.el = <span class="string">'tagName'</span> <span class="keyword">in</span> firstTouch.target ? firstTouch.target : firstTouch.target.parentNode</span><br><span class="line">        <span class="comment">#更新touch.x1(本次点击的X坐标)</span></span><br><span class="line">        touch.x1 = firstTouch.pageX</span><br><span class="line">        <span class="comment">#更新touch.y1(本次点击的Y坐标)</span></span><br><span class="line">        touch.y1 = firstTouch.pageY</span><br><span class="line">        <span class="comment">#清除长按定时器(如果有上一次触控动作，那么就放弃定时，没有也要清空)</span></span><br><span class="line">        longTapTimeout = null</span><br><span class="line">        <span class="comment">#清除长按定时器(自本次动作开始进行长按倒计时)</span></span><br><span class="line">        longTapTimeout = <span class="built_in">set</span>Timeout(longTap, longTapDelay)</span><br><span class="line">        <span class="comment">#更新 '上次点击时间',以备判断双击事件</span></span><br><span class="line">        touch.last = now</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="开始移动手指"><a href="#开始移动手指" class="headerlink" title="开始移动手指"></a>开始移动手指</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#手指触碰到屏幕后开始移动(未离开屏幕)</span></span><br><span class="line">document.addEventListener(<span class="string">'touchmove'</span>, <span class="keyword">function</span>(e) &#123;</span><br><span class="line">    <span class="comment">#实时更新触点</span></span><br><span class="line">    firstTouch = e.touches[0]</span><br><span class="line">    <span class="comment">#如果已经开始长按倒计时，清除！</span></span><br><span class="line">    <span class="keyword">if</span> (longTapTimeout) clearTimeout(longTapTimeout)</span><br><span class="line">    <span class="comment">#实时获取坐标X</span></span><br><span class="line">    touch.x2 = firstTouch.pageX</span><br><span class="line">    <span class="comment">#实时获取坐标Y</span></span><br><span class="line">    touch.y2 = firstTouch.pageY</span><br><span class="line">    <span class="comment">#从原点出发移动的距离增量</span></span><br><span class="line">    deltaX += Math.abs(touch.x1 - touch.x2)</span><br><span class="line">    deltaY += Math.abs(touch.y1 - touch.y2)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="手指离开屏幕"><a href="#手指离开屏幕" class="headerlink" title="手指离开屏幕"></a>手指离开屏幕</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"> document.addEventListener(<span class="string">'touchend'</span>, <span class="keyword">function</span>(e) &#123;</span><br><span class="line">    <span class="comment">#离开了屏幕 所以清除长按倒计时</span></span><br><span class="line">    <span class="keyword">if</span> (longTapTimeout) clearTimeout(longTapTimeout)</span><br><span class="line">    longTapTimeout = null</span><br><span class="line"></span><br><span class="line">    <span class="comment">#如果存在二次点击增量，并移动了大于30个单位</span></span><br><span class="line">    <span class="keyword">if</span> (touch.x2 &amp;&amp; Math.abs(touch.x1 - touch.x2) &gt; 30 ||</span><br><span class="line">        touch.y2 &amp;&amp; Math.abs(touch.y1 - touch.y2) &gt; 30) &#123;</span><br><span class="line">        <span class="comment">#触发swipe事件</span></span><br><span class="line">        <span class="comment">#判断并触发对应方向的swipe事件</span></span><br><span class="line">        trigger(touch.el, <span class="string">'swipe'</span>)</span><br><span class="line">        trigger(touch.el, <span class="string">'swipe'</span> + swipeDirection(touch.x1, touch.y1, touch.x2, touch.y2))</span><br><span class="line">        <span class="comment">#清空touch对象</span></span><br><span class="line">        cancelAll()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">#移动不超过30个单位</span></span><br><span class="line">    <span class="keyword">if</span> (deltaX &lt; 30 &amp;&amp; deltaY &lt; 30) &#123;</span><br><span class="line">        <span class="keyword">if</span> (touch.isDoubleTap) &#123;</span><br><span class="line">        	<span class="comment">#触发 dblTap</span></span><br><span class="line">          <span class="keyword">if</span> (touch.el) trigger(touch.el, <span class="string">'dblTap'</span>)</span><br><span class="line">          <span class="comment">#清空存储器</span></span><br><span class="line">          touch = &#123;&#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="comment">#延时，等待可能发生的第二次点击。</span></span><br><span class="line">          touchTimeout = <span class="built_in">set</span>Timeout(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">              touchTimeout = null</span><br><span class="line">              <span class="keyword">if</span> (touch.el) trigger(touch.el, <span class="string">'tap'</span>)</span><br><span class="line">          &#125;, 300)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        touch = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  	deltaX = deltaY = 0</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="判断滑动方向"><a href="#判断滑动方向" class="headerlink" title="判断滑动方向"></a>判断滑动方向</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> swipeDirection(x1, y1, x2, y2) &#123;</span><br><span class="line">    <span class="built_in">return</span> Math.abs(x1 - x2) &gt;= Math.abs(y1 - y2) ? (x1 &gt; x2) ? <span class="string">'Left'</span> : <span class="string">'Right'</span> : (y1 &gt; y2) ? <span class="string">'Up'</span> : <span class="string">'Down'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="取消所有定时器"><a href="#取消所有定时器" class="headerlink" title="取消所有定时器"></a>取消所有定时器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">cancelAll</span></span>() &#123;</span><br><span class="line">  <span class="keyword">if</span> (touchTimeout) clearTimeout(touchTimeout)</span><br><span class="line">  <span class="keyword">if</span> (longTapTimeout) clearTimeout(longTapTimeout)</span><br><span class="line">  touchTimeout = tapTimeout = swipeTimeout = longTapTimeout = null</span><br><span class="line">  touch = &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="事件触发器"><a href="#事件触发器" class="headerlink" title="事件触发器"></a>事件触发器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> trigger(ele, method) &#123;</span><br><span class="line">  var evt = document.createEvent(<span class="string">"HTMLEvents"</span>)</span><br><span class="line">  evt.initEvent(method,<span class="literal">false</span>,<span class="literal">false</span>)</span><br><span class="line">  ele.dispatchEvent(evt)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="长按处理"><a href="#长按处理" class="headerlink" title="长按处理"></a>长按处理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">longTap</span></span>() &#123;</span><br><span class="line">  <span class="comment">#清除长按判断定时器</span></span><br><span class="line">  longTapTimeout = null</span><br><span class="line">  <span class="comment">#为保存的对象触发长按事件</span></span><br><span class="line">  trigger(touch.el, <span class="string">'longTap'</span>)</span><br><span class="line">  <span class="comment">#清空touch对象为空状态</span></span><br><span class="line">  touch = &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DOM.addEventListener(event,func)</span><br></pre></td></tr></table></figure>
<h1 id="完"><a href="#完" class="headerlink" title="完"></a>完</h1><hr>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/18/随笔/" itemprop="url">
                  造轮子的意义
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-18T11:13:11+08:00" content="2016-03-18">
              2016-03-18
            </time>
          </span>

          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><em>造轮子的意义</em></p>
<h2 id="在学习自定义移动端事件时的碎碎念"><a href="#在学习自定义移动端事件时的碎碎念" class="headerlink" title="在学习自定义移动端事件时的碎碎念"></a><code>在学习自定义移动端事件时的碎碎念</code></h2><h3 id="不停的追寻已存在的事物，不停地陷入别人有意或无意设定好的圈"><a href="#不停的追寻已存在的事物，不停地陷入别人有意或无意设定好的圈" class="headerlink" title="不停的追寻已存在的事物，不停地陷入别人有意或无意设定好的圈"></a>不停的追寻已存在的事物，不停地陷入别人有意或无意设定好的圈</h3><h3 id="不停的为了填坑而挖坑，自问，意义何在？"><a href="#不停的为了填坑而挖坑，自问，意义何在？" class="headerlink" title="不停的为了填坑而挖坑，自问，意义何在？"></a>不停的为了填坑而挖坑，自问，意义何在？</h3><h3 id="是安然度日，眨眼百年？还是分秒都精彩纷呈，无论痛苦或快乐，朝心中所想而前行？"><a href="#是安然度日，眨眼百年？还是分秒都精彩纷呈，无论痛苦或快乐，朝心中所想而前行？" class="headerlink" title="是安然度日，眨眼百年？还是分秒都精彩纷呈，无论痛苦或快乐，朝心中所想而前行？"></a>是安然度日，眨眼百年？还是分秒都精彩纷呈，无论痛苦或快乐，朝心中所想而前行？</h3><h3 id="习惯就会安稳，安稳中变得麻木-麻木的沉沦，沉沦而不复。"><a href="#习惯就会安稳，安稳中变得麻木-麻木的沉沦，沉沦而不复。" class="headerlink" title="习惯就会安稳，安稳中变得麻木,麻木的沉沦，沉沦而不复。"></a>习惯就会安稳，安稳中变得麻木,麻木的沉沦，沉沦而不复。</h3><h1 id="完"><a href="#完" class="headerlink" title="完"></a>完</h1><hr>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/08/markdown-learn/" itemprop="url">
                  学习 markdown 语法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-08T11:12:11+08:00" content="2016-03-08">
              2016-03-08
            </time>
          </span>

          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="被定位的标签"><a href="#被定位的标签" class="headerlink" title="被定位的标签"></a><a href="" name="toSomeId"></a>被定位的标签</h2><h3 id="标题"><a href="#标题" class="headerlink" title="标题"></a><code>标题</code></h3><h1 id="一个-是一级标题"><a href="#一个-是一级标题" class="headerlink" title="一个#是一级标题"></a>一个#是一级标题</h1><h2 id="两个-是二级标题"><a href="#两个-是二级标题" class="headerlink" title="两个#是二级标题"></a>两个#是二级标题</h2><h3 id="三个-是三级标题"><a href="#三个-是三级标题" class="headerlink" title="三个#是三级标题"></a>三个#是三级标题</h3><h4 id="四个-是四级标题"><a href="#四个-是四级标题" class="headerlink" title="四个#是四级标题"></a>四个#是四级标题</h4><h5 id="五个-是五级标题"><a href="#五个-是五级标题" class="headerlink" title="五个#是五级标题"></a>五个#是五级标题</h5><h6 id="六个-是六级标题"><a href="#六个-是六级标题" class="headerlink" title="六个#是六级标题"></a>六个#是六级标题</h6><h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a><code>列表</code></h3><ul>
<li>前面加一个 - </li>
</ul>
<ul>
<li>前面加一个*</li>
</ul>
<h3 id="文字"><a href="#文字" class="headerlink" title="文字"></a><code>文字</code></h3><p><strong>**加粗</strong> **</p>
<p><em>*斜体</em> *</p>
<p>~~ <del>删除线</del>~~</p>
<p><code>&#39;这是加了背景色&#39; 数字1左边的点</code></p>
<p><a href="#toSomeId">锚标签，通向某个ID</a></p>
<p>空格&nbsp;空格结束</p>
<h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a><code>引用</code></h3><blockquote>
<p>“Wer sich tief weiß, bemüht sich um Klarheit; wer der Menge tief scheinen möchte, bemüht sich um Dunkelheit.” ——— Friedrich Nietzsche</p>
</blockquote>
<h3 id="图片"><a href="#图片" class="headerlink" title="图片"></a><code>图片</code></h3><p><img src="http://pngimg.com/upload/plane_PNG5259.png" alt="pic"></p>
<h3 id="带框的区域"><a href="#带框的区域" class="headerlink" title="带框的区域"></a><code>带框的区域</code></h3><pre><code>(前面要tab一下)带有框的区域
</code></pre><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a><code>表格</code></h3><table>
<thead>
<tr>
<th style="text-align:center">创建人</th>
<th style="text-align:center">创建时间</th>
<th style="text-align:center">修改说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">:—:</td>
<td style="text-align:center">:—:</td>
<td style="text-align:center">:—:</td>
</tr>
<tr>
<td style="text-align:center">第一格</td>
<td style="text-align:center">第二格</td>
<td style="text-align:center">第三格</td>
</tr>
</tbody>
</table>
<p> —- 或者 ‘<em>*</em>‘</p>
<h1 id="完"><a href="#完" class="headerlink" title="完"></a>完</h1><hr>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/08/Establish-hexo-on-github/" itemprop="url">
                  Establish hexo on github
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-08T11:11:11+08:00" content="2016-03-08">
              2016-03-08
            </time>
          </span>

          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong><em>搭建基于hexo static blog system</em></strong></p>
<p>在上一天，不停地重复删除文件和remote add 、push -u origin等动作，总算是架起了hexo，在此记录一下大概过程。<br><em>（此处仅以windows平台为例）</em></p>
<hr>
<h2 id="第一步，安装nodeJs"><a href="#第一步，安装nodeJs" class="headerlink" title="第一步，安装nodeJs"></a><code>第一步，安装nodeJs</code></h2><p>下载并安装最新版nodeJs &gt;&gt;&gt; <a href="https://nodejs.org/en/download/" target="_blank" rel="external">https://nodejs.org/en/download/</a></p>
<p><em>(较新版本的nodeJs集成了NPM,并且自动添加PATH)</em></p>
<p>测试nodeJs与NPM是否安装完成<br>打开命令行 <strong>（win + R）</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">node -v </span><br><span class="line"><span class="comment">#v0.12.7</span></span><br><span class="line">npm -v </span><br><span class="line"><span class="comment">#2.11.3</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="第二步，安装hexo"><a href="#第二步，安装hexo" class="headerlink" title="第二步，安装hexo"></a><code>第二步，安装hexo</code></h2><p>打开命令行 <strong>（win + R）</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">npm install hexo --save</span><br><span class="line"><span class="comment">#可能因为GFW的原因安装失败</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="第三步，初始化hexo"><a href="#第三步，初始化hexo" class="headerlink" title="第三步，初始化hexo"></a><code>第三步，初始化hexo</code></h2><p>hexo安装完成后，就可以开始建立自己的blog系统了<br>打开命令行 <strong>（win + R）</strong><br>键入如下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">d: <span class="comment">#进入某个盘符</span></span><br><span class="line">md &lt;yourFolderName&gt; <span class="comment">#创建并命名一个文件夹</span></span><br><span class="line"><span class="built_in">cd</span> yourFolderName <span class="comment">#进入你创建的文件夹</span></span><br><span class="line">hexo init <span class="comment">#执行hexo初始化命令</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="第四步，hexo的命令"><a href="#第四步，hexo的命令" class="headerlink" title="第四步，hexo的命令"></a><code>第四步，hexo的命令</code></h2><p>进入在上一步里创建并初始化了hexo的文件夹</p>
<p><strong>如果要新建一篇文章</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo n &lt;name&gt; <span class="comment">#生成一片新文章 需要命名，等同于 hexo new ""</span></span><br><span class="line">hexo new <span class="string">""</span></span><br><span class="line"><span class="comment">#或者进入source\_posts 手动生成MD格式的文件</span></span><br></pre></td></tr></table></figure></p>
<p><strong>查看文章的预览效果</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo s 等同于 hexo server</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure></p>
<p>然后打开浏览器，在地址栏输入<a href="http://localhost:4000/" target="_blank" rel="external">http://localhost:4000/</a></p>
<p><strong>生成静态文件</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g 等同于 hexo generate</span><br><span class="line">hexo generate</span><br></pre></td></tr></table></figure></p>
<p>这时，在你建立的hexo目录下就会出现一个名为public的文件夹。</p>
<hr>
<h2 id="第五步，安装并设置git"><a href="#第五步，安装并设置git" class="headerlink" title="第五步，安装并设置git"></a><code>第五步，安装并设置git</code></h2><p><strong>注册</strong><br>去<a href="github.com">github.com</a>注册一个账号，并建立一个名为yourName.github.io 的仓库。<br>此处以 mike 为例(下同), 建立一个mike.github.io的仓库</p>
<p><strong>下载git</strong><br><a href="http://git-scm.com/download/" target="_blank" rel="external">下载git</a> 或者 <a href="https://desktop.github.com/" target="_blank" rel="external">下载github出品的桌面版</a><br><em>（此处以git为例）</em><br><strong>参考:<a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/" target="_blank" rel="external">廖雪峰的git教程</a></strong></p>
<p><strong>设置账号和邮箱</strong><br>打开 git bash，输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">'mike'</span> <span class="comment">#你注册的用户名</span></span><br><span class="line">git config --global user.email <span class="string">'yourEmail@example.com'</span> <span class="comment">#注册时输入的安全邮箱</span></span><br></pre></td></tr></table></figure></p>
<p><strong>建立本地仓库以及链接远程地址</strong><br>进入hexo下的public文件夹，输入<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init <span class="comment">#初始化本地git</span></span><br><span class="line">git remote add origin https://github.com/mike/mike.github.io.git <span class="comment">#你之后的push都会提交到这个地址</span></span><br></pre></td></tr></table></figure></p>
<h2 id="第六步，提交暂存区，提交到仓库，push到远端仓库"><a href="#第六步，提交暂存区，提交到仓库，push到远端仓库" class="headerlink" title="第六步，提交暂存区，提交到仓库，push到远端仓库"></a><code>第六步，提交暂存区，提交到仓库，push到远端仓库</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git add . <span class="comment">#提交当前路径下的所有文件夹和文件至暂存区</span></span><br><span class="line">git commit -m <span class="string">"描述你本次提交的信息"</span> . <span class="comment">#提交暂存区的修改至仓库</span></span><br><span class="line">git push -u origin master <span class="comment">#提交此仓库至远程仓库</span></span><br><span class="line"><span class="comment">#注：如如果在push时提示输入账户和密码，请尝试更换clone Urls,SSH	方式需要在github个人信息里添加ssh Key</span></span><br></pre></td></tr></table></figure>
<p><strong>打开浏览器，进入你的github.io，there you go!</strong></p>
<h1 id="完"><a href="#完" class="headerlink" title="完"></a>完</h1><hr>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/default_avatar.jpg"
               alt="17x" />
          <p class="site-author-name" itemprop="name">17x</p>
          <p class="site-description motion-element" itemprop="description">古岂无人，孤标凌云谁与朋。高冢笑卧，春秋一阕任琦行</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">4</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>
          
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">17x</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  



  



  
  
  

  


</body>
</html>
