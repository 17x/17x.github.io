var myApp=angular.module("myApp",["ngAnimate","ui.router","ngTouch","ngCookies","angular-carousel"]);myApp.run(["$templateCache",function(t){t.put("templateId1","tpls/search.html"),t.put("templateId2","tpls/category.html"),t.put("templateId3","tpls/usercenter.html"),t.put("templateId4","tpls/post.html")}]),window.onresize=function(){return document.getElementsByTagName("html")[0].style.fontSize=(document.documentElement||document.body).clientWidth/25+"px",arguments.callee}();
myApp.controller("myAppCtrl",["$rootScope","$scope","$swipe","$location","$document","$animate","$timeout","$cookies",function(e,o,t,n,i,c,a,r){e.headerTitle={hrefName:"服装微加工",iconName:"icon-wode"},e.searchInput="",o.footerItems=[{itemName:"首页",srefLink:"home",iconName:"icon-wode"},{itemName:"分类",srefLink:"category",iconName:"icon-xiehuo"},{itemName:"用户中心",srefLink:"usercenter",iconName:"icon-dingdan"},{itemName:"发布",srefLink:"post",iconName:"icon-wodedianpu"}],o.setHeaderCenter=function(o,t){a(function(){e.headerTitle={hrefName:o,iconName:t}},200)},void 0!==typeof Storage&&window.localStorage.getItem("cityid")&&window.localStorage.getItem("cityname")?e.currentCity={cityid:window.localStorage.getItem("cityid"),cityname:window.localStorage.getItem("cityname")}:r.get("cityid")&&r.get("cityname")?e.currentCity={cityname:r.get("cityname"),cityid:r.get("curCity")}:e.currentCity={cityid:"00",cityname:"总站"},o.timer=null;var l=i.find("body"),m=["home","category","usercenter","post"];o.$on("$stateChangeStart",function(t,n,i,c,r){a.cancel(o.timer),""!==c.name&&(l.removeClass("fadeOutAndIn"),l.removeClass("fadeInAndOutToRight"),m.indexOf(c.name)>m.indexOf(n.name)?l.addClass("fadeInAndOutToRight"):m.indexOf(c.name)<m.indexOf(n.name)&&l.addClass("fadeOutAndIn"),o.timer=a(function(){l.removeClass("fadeOutAndIn"),l.removeClass("fadeInAndOutToRight")},500)),"home"===n.name?a(function(){e.isShowBack=!1},500):e.isShowBack=!0}),o.handleSwipeLeft=function(){var e=m.indexOf(n.path().replace("/",""));return e!==-1&&void(3!==e?n.path(m[e+1]):n.path(m[0]))},o.handleSwipeRight=function(){var e=m.indexOf(n.path().replace("/",""));return e!==-1&&void(0!==e?n.path(m[e-1]):n.path(m[m.length-1]))},e.toInfoPage=function(t){e.curInfo=t,n.url("info?infoid="+t.id),o.headerTitle={hrefName:t.title,iconName:"icon-wode"}}}]),myApp.controller("homeCtrl",["$rootScope","$scope","$http","$location","updateHomeItem",function(e,o,t,n,i){n.url("home"),e.headerTitle={hrefName:"服装微加工",iconName:"icon-wode"},void 0!==typeof Storage&&window.localStorage.aCategorysInHome&&(console.log("进入页面后找寻本地存储进行赋值"),o.aCategorysInHome=JSON.parse(window.localStorage.aCategorysInHome),console.log(o.aCategorysInHome)),i.getNewest().then(function(e){e&&(o.aCategorysInHome=e.data)},function(e){console.log("获取错误")})}]),myApp.controller("searchCtrl",["$rootScope","$scope","$http","$location",function(e,o,t,n){e.headerTitle={hrefName:"服装微加工",iconName:"icon-sousuo"},n.search().keywords&&n.search().keywords.length&&(e.searchInput=n.search().keywords),n.search().catid&&n.search().catid.length&&(o.catid=n.search().catid),console.log(e.searchInput),console.log(o.catid)}]),myApp.controller("categoryCtrl",["$rootScope","$scope","$http","$location",function(e,o,t,n){t.get("mock/cates.json").then(function(e){o.cates=e.data},function(e){})}]),myApp.controller("usercenterCtrl",["$rootScope","$scope","$http","$location",function(e,o,t,n){}]),myApp.controller("postCtrl",["$rootScope","$scope","$http","$location",function(e,o,t,n){}]),myApp.controller("cityCtrl",["$rootScope","$scope","$http","$location","updateHomeItem","$anchorScroll","$cookies",function(e,o,t,n,i,c,a){t.get("mock/cities/cities.json").then(function(e){o.cities=e.data},function(e){console.log(e)}),o.setCity=function(o){e.currentCity={cityname:o.cityname,cityid:o.cityid},a.put("cityid",o.cityid),a.put("cityname",o.cityname),window.localStorage.setItem("cityname",o.cityname),window.localStorage.setItem("cityid",o.cityid),n.path("/home")},o.scrollTo=function(e){console.log(e),console.log(document.getElementById(e)),c.yOffset=44,c("province"+e)}}]),myApp.controller("infoCtrl",["$rootScope","$scope","$http","$location",function(e,o,t,n){o.curInfo=e.curInfo,e.curInfo=null;var i=0;o.curInfo?i=o.curInfo.id:!o.curInfo&&n.search().infoid&&(i=n.search().infoid),(n.search().infoid<53864||n.search().infoid>53914)&&(console.log(i,"num is not in range"),i=parseInt(49*Math.random())+53864,console.log("随机分配infoid:",i)),n.search("infoid",i),t.get("mock/infos/"+i+".json").then(function(e){o.curInfo=e.data},function(e){});var c=[["mock/img/pre_1484540313t64on.jpg","mock/img/pre_1484540343znkl1.JPEG","mock/img/pre_1484540364ineji.jpg","mock/img/pre_14845404071dgw4.jpg"],["mock/img/1484540313t64on.jpg","mock/img/1484540343znkl1.JPEG","mock/img/1484540364ineji.jpg","mock/img/14845404071dgw4.jpg"]];o.slides=c[0],o.tapImage=function(e){console.log(e);var t=document.getElementById("imgCarouselCover");angular.element(t).hasClass("fullscreen")?(angular.element(t).removeClass("fullscreen"),o.slides=c[0]):(angular.element(t).addClass("fullscreen"),o.slides=c[1])}}]);
myApp.directive("searchBar",["$rootScope","$location","$templateCache",function(t,e,o){return{restrict:"AE",require:"?search",templateUrl:"tpls/searchBar.html",link:function(t,e,o,n){}}}]),myApp.directive("infolist",["$http","$q","$rootScope",function(t,e,o){return{restrict:"AE",replace:!1,scope:{},templateUrl:"tpls/infoListOnHome.html",link:function(e){e.toInfoPage=o.toInfoPage,t.get("mock/cities/"+Number(o.currentCity.cityid)+"/cityinfo.json").then(function(t){e.cityInfoOnHome=t.data},function(t){console.log(t)})}}}]);
myApp.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,o){o.html5Mode(!1),t.otherwise("home");var r={templateUrl:"index.html"},l={templateUrl:"tpls/header.html"},h={templateUrl:"tpls/footer.html"};e.state("home",{url:"/home",views:{"":r,"header@home":l,"footer@home":h,"content@home":{templateUrl:"tpls/main.html"}}}).state("search",{url:"/search?:keywords:catid",views:{"":r,"header@home":l,"footer@home":h,"content@home":{templateUrl:"tpls/search.html"}}}).state("category",{url:"/category",views:{"":r,"header@home":l,"footer@home":h,"content@home":{templateUrl:"tpls/category.html"}}}).state("usercenter",{url:"/usercenter",views:{"":r,"header@home":l,"footer@home":h,"content@home":{templateUrl:"tpls/userCenter.html"}}}).state("post",{url:"/post",views:{"":r,"header@home":l,"footer@home":h,"content@home":{templateUrl:"tpls/post.html"}}}).state("city",{url:"/city",views:{"":r,"header@home":l,"footer@home":h,"content@home":{templateUrl:"tpls/city.html"}}}).state("info",{url:"/info?infoid",views:{"":r,"header@home":l,"footer@home":h,"content@home":{templateUrl:"tpls/info.html"}}})}]);
myApp.service("updateHomeItem",["$http","$q",function(e,t){this.getNewest=function(){var o=t.defer();return e({method:"get",url:"mock/aCategorysInHome.json"}).then(function(e){o.resolve(e)},function(e){o.reject("error")}),o.promise}}]);
//# sourceMappingURL=index.min.js.map
