{"version":3,"sources":["App.js","controllers.js","directives.js","router.js","service.js"],"names":["myApp","angular","module","run","$templateCache","put","window","onresize","document","getElementsByTagName","style","fontSize","documentElement","body","clientWidth","arguments","callee","controller","$rootScope","$scope","$swipe","$location","$document","$animate","$timeout","$cookies","$interval","allTag","blacklist","all","i","length","nodeType","tagName","toLowerCase","href","search","console","log","parentNode","removeChild","src","headerTitle","hrefName","iconName","searchInput","footerItems","itemName","srefLink","setHeaderCenter","undefined","localStorage","getItem","currentCity","cityid","cityname","get","timer","splashTimer","$body","find","aViews","$on","event","toState","toParams","fromState","fromParams","cancel","name","removeClass","indexOf","addClass","isShowBack","getElementById","display","handleSwipeLeft","index","path","replace","handleSwipeRight","toInfoPage","obj","curInfo","url","id","title","$http","updateHomeItem","Storage","aCategorysInHome","JSON","parse","getNewest","then","response","data","error","keywords","catid","suc","cates","$anchorScroll","cities","setCity","setItem","scrollTo","e","yOffset","num","infoid","parseInt","Math","random","aImages","slides","tapImage","$event","oImgCover","element","hasClass","directive","restrict","require","templateUrl","link","scope","ele","attrs","upCtrl","$q","Number","cityInfoOnHome","config","$stateProvider","$urlRouterProvider","$locationProvider","html5Mode","otherwise","indexInIndex","headerInhome","footerInhome","state","views","","header@home","footer@home","content@home","service","this","d","defer","method","resolve","faild","reject","promise"],"mappings":"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","file":"index.min.js","sourcesContent":["// var myApp = angular.module('myApp', ['ngSanitize','ngAnimate', 'ui.router', 'ui.select','ngTouch']);\nvar myApp = angular.module('myApp', ['ngAnimate', 'ui.router', 'ngTouch','ngCookies','angular-carousel']);\n/*myApp.config([\"$locationProvider\",function($locationProvider){\n    \n}])*/\n// 缓存模板\nmyApp.run([\"$templateCache\", function($templateCache) {\n    $templateCache.put('templateId1', 'tpls/search.html');\n    $templateCache.put('templateId2', 'tpls/category.html');\n    $templateCache.put('templateId3', 'tpls/usercenter.html');\n    $templateCache.put('templateId4', 'tpls/post.html');\n}]);\n//开启rem\nwindow.onresize = (function() {\n    document.getElementsByTagName('html')[0].style.fontSize = (document.documentElement || document.body).clientWidth / 25 + \"px\";\n    return arguments.callee;\n})();\n","// 全局contrl\r\nmyApp.controller('myAppCtrl', [\"$rootScope\",\r\n    \"$scope\",\r\n    \"$swipe\",\r\n    \"$location\",\r\n    \"$document\",\r\n    \"$animate\",\r\n    \"$timeout\",\r\n    \"$cookies\",\r\n    \"$interval\",\r\n    function($rootScope,\r\n        $scope,\r\n        $swipe,\r\n        $location,\r\n        $document,\r\n        $animate,\r\n        $timeout,\r\n        $cookies,\r\n        $interval) {\r\n\r\n        // 反http拦截广告\r\n        var allTag = [],\r\n            blacklist = ['baidu.', 'winyylg'];\r\n        $interval(function() {\r\n            allTag = document.all;\r\n            for (var i = 0; i < allTag.length; i++) {\r\n\r\n                if (allTag[i].nodeType === 1 &&\r\n                    (allTag[i].tagName.toLowerCase() === 'a' ||\r\n                        allTag[i].tagName.toLowerCase() === 'img' ||\r\n                        allTag[i].tagName.toLowerCase() === 'script' ||\r\n                        allTag[i].tagName.toLowerCase() === 'iframe')) {\r\n\r\n                    if (allTag[i].href && allTag[i].href.length > 0) {\r\n                        if (allTag[i].href.search(blacklist[0]) !== -1) {\r\n                            console.log(allTag[i])\r\n                            allTag[i].parentNode.removeChild(allTag[i])\r\n                        }\r\n                        if (allTag[i].href.search(blacklist[1]) !== -1) {\r\n                            console.log(allTag[i])\r\n                            allTag[i].parentNode.removeChild(allTag[i])\r\n                        }\r\n                    }\r\n                    if (allTag[i].src && allTag[i].src.length > 0) {\r\n                        if (allTag[i].src.search(blacklist[0]) !== -1) {\r\n                            console.log(allTag[i])\r\n                            allTag[i].parentNode.removeChild(allTag[i])\r\n                        }\r\n                        if (allTag[i].src.search(blacklist[1]) !== -1) {\r\n                            console.log(allTag[i])\r\n                            allTag[i].parentNode.removeChild(allTag[i])\r\n                        }\r\n                        if (allTag[i].src.search('i.js') !== -1) {\r\n                            allTag[i].parentNode.removeChild(allTag[i])\r\n                        }\r\n                    }\r\n                }\r\n                // console.log(i.src, i.href)\r\n            }\r\n            console.log('-----------------');\r\n        }, 2000);\r\n\r\n        // header中央的文字与图标初始化\r\n        $rootScope.headerTitle = { hrefName: '服装微加工', iconName: 'icon-wode' };\r\n\r\n        //serach input初始化\r\n        $rootScope.searchInput = '';\r\n        // footer 四个item\r\n        $scope.footerItems = [{\r\n            itemName: \"首页\",\r\n            srefLink: \"home\",\r\n            iconName: \"icon-wode\"\r\n        }, {\r\n            itemName: \"分类\",\r\n            srefLink: \"category\",\r\n            iconName: \"icon-xiehuo\"\r\n        }, {\r\n            itemName: \"用户中心\",\r\n            srefLink: \"usercenter\",\r\n            iconName: \"icon-dingdan\"\r\n        }, {\r\n            itemName: \"发布\",\r\n            srefLink: \"post\",\r\n            iconName: \"icon-wodedianpu\"\r\n        }];\r\n\r\n        // footer点击任一项传入其文字与icon信息\r\n        // 其它ctrl也可调用\r\n        $scope.setHeaderCenter = function(itemName, iconName) {\r\n            $timeout(function() {\r\n                $rootScope.headerTitle = { hrefName: itemName, iconName: iconName };\r\n            }, 200);\r\n        };\r\n        // 当前城市获取与与设置\r\n        // 判断localstorage\r\n        if (typeof(Storage) !== undefined && window.localStorage.getItem('cityid') && window.localStorage.getItem('cityname')) {\r\n            $rootScope.currentCity = {\r\n                cityid: window.localStorage.getItem('cityid'),\r\n                cityname: window.localStorage.getItem('cityname')\r\n            };\r\n        } else {\r\n            // 判断cookies\r\n            if ($cookies.get('cityid') && $cookies.get('cityname')) {\r\n                $rootScope.currentCity = {\r\n                    cityname: $cookies.get('cityname'),\r\n                    cityid: $cookies.get('curCity')\r\n                };\r\n            } else {\r\n                // 设置为总站\r\n                $rootScope.currentCity = {\r\n                    cityid: '00',\r\n                    cityname: '总站'\r\n                };\r\n            }\r\n        }\r\n\r\n        $scope.timer = null;\r\n        $scope.splashTimer = null;\r\n        var $body = $document.find('body');\r\n        var aViews = ['home', 'category', 'usercenter', 'post'];\r\n        //监听路由改变 添加动画\r\n        $scope.$on('$stateChangeStart', function(event, toState, toParams, fromState, fromParams) {\r\n            $timeout.cancel($scope.timer);\r\n            if (fromState.name !== \"\") {\r\n                $body.removeClass('fadeOutAndIn');\r\n                $body.removeClass('fadeInAndOutToRight');\r\n                if (aViews.indexOf(fromState.name) > aViews.indexOf(toState.name)) {\r\n                    // right to left\r\n                    $body.addClass('fadeInAndOutToRight');\r\n                } else if (aViews.indexOf(fromState.name) < aViews.indexOf(toState.name)) {\r\n                    // left to right\r\n                    $body.addClass('fadeOutAndIn');\r\n                }\r\n\r\n                $scope.timer = $timeout(function() {\r\n                    // clearAll\r\n                    $body.removeClass('fadeOutAndIn');\r\n                    $body.removeClass('fadeInAndOutToRight');\r\n                }, 500);\r\n            }\r\n\r\n            //判断是否显示返回按钮\r\n            if (toState.name === 'home') {\r\n                $timeout(function() {\r\n                    $rootScope.isShowBack = false;\r\n                }, 500);\r\n            } else {\r\n                $rootScope.isShowBack = true;\r\n\r\n            }\r\n        });\r\n        $scope.$on('$stateChangeSuccess', function(event, toState, toParams, fromState, fromParams) {\r\n            $timeout.cancel($scope.splashTimer);\r\n            $scope.splashTimer = $timeout(function() {\r\n                document.getElementById('splash').style.display = \"none\";\r\n            }, 1000);\r\n        });\r\n        //滑动页面时的路由处理\r\n        $scope.handleSwipeLeft = function() {\r\n            var index = aViews.indexOf($location.path().replace('\\/', ''));\r\n            if (index === -1) {\r\n                return false;\r\n            }\r\n            if (index !== 3) {\r\n                // 往左滑动，页面往右+1\r\n                $location.path(aViews[index + 1]);\r\n            } else {\r\n                $location.path(aViews[0]);\r\n            }\r\n        };\r\n\r\n        $scope.handleSwipeRight = function() {\r\n            var index = aViews.indexOf($location.path().replace('\\/', ''));\r\n            if (index === -1) {\r\n                return false;\r\n            }\r\n            if (index !== 0) {\r\n                // 往左滑动，页面往右+1\r\n                $location.path(aViews[index - 1]);\r\n            } else {\r\n                $location.path(aViews[aViews.length - 1]);\r\n\r\n            }\r\n        };\r\n\r\n        $rootScope.toInfoPage = function(obj) {\r\n            //更改location后页面跳转\r\n            // 后续由infoCtrl处理\r\n            $rootScope.curInfo = obj;\r\n            $location.url('info?infoid=' + obj.id);\r\n            $scope.headerTitle = { hrefName: obj.title, iconName: 'icon-wode' };\r\n        };\r\n    }\r\n]);\r\n\r\n\r\n//  home页的content控制器\r\nmyApp.controller('homeCtrl', [\"$rootScope\", \"$scope\", \"$http\", \"$location\", \"updateHomeItem\", function($rootScope, $scope, $http, $location, updateHomeItem) {\r\n    // 为了在页面进入home时清除url参数\r\n    $location.url('home');\r\n    // console.log($rootScope.headerTitle)\r\n    $rootScope.headerTitle = { hrefName: '服装微加工', iconName: 'icon-wode' };\r\n    // console.log($rootScope.headerTitle)\r\n\r\n    // 获取首页八个大类信息\r\n    if ((typeof Storage) !== undefined && window.localStorage.aCategorysInHome) {\r\n        console.log('进入页面后找寻本地存储进行赋值');\r\n        $scope.aCategorysInHome = JSON.parse(window.localStorage.aCategorysInHome);\r\n        console.log($scope.aCategorysInHome);\r\n    }\r\n\r\n    // 通过service获取最新list\r\n    updateHomeItem.getNewest().then(function(response) {\r\n        if (response) {\r\n            $scope.aCategorysInHome = response.data;\r\n        }\r\n    }, function(error) {\r\n        console.log('获取错误');\r\n    });\r\n}]);\r\n\r\n// search 控制器\r\nmyApp.controller('searchCtrl', [\"$rootScope\", \"$scope\", \"$http\", \"$location\", function($rootScope, $scope, $http, $location) {\r\n    // header中央的文字\r\n    $rootScope.headerTitle = { hrefName: '服装微加工', iconName: 'icon-sousuo' };\r\n\r\n    // 进入search页面后为输入框添加url内的keywords\r\n    if ($location.search().keywords && $location.search().keywords.length) {\r\n        $rootScope.searchInput = $location.search().keywords;\r\n    }\r\n    if ($location.search().catid && $location.search().catid.length) {\r\n        $scope.catid = $location.search().catid;\r\n    }\r\n    console.log($rootScope.searchInput);\r\n    console.log($scope.catid);\r\n}]);\r\n\r\n// category 控制器\r\nmyApp.controller('categoryCtrl', [\"$rootScope\", \"$scope\", \"$http\", \"$location\", function($rootScope, $scope, $http, $location) {\r\n    $http.get('mock/cates.json').then(function(suc) {\r\n        $scope.cates = suc.data;\r\n    }, function(error) {\r\n\r\n    });\r\n}]);\r\n\r\n// usercenter 控制器\r\nmyApp.controller('usercenterCtrl', [\"$rootScope\", \"$scope\", \"$http\", \"$location\", function($rootScope, $scope, $http, $location) {\r\n\r\n}]);\r\n\r\n// post 控制器\r\nmyApp.controller('postCtrl', [\"$rootScope\", \"$scope\", \"$http\", \"$location\", function($rootScope, $scope, $http, $location) {\r\n\r\n\r\n}]);\r\n//  城市选择页的content控制器\r\nmyApp.controller('cityCtrl', [\"$rootScope\", \"$scope\", \"$http\", \"$location\", \"updateHomeItem\", \"$anchorScroll\", \"$cookies\", function($rootScope, $scope, $http, $location, updateHomeItem, $anchorScroll, $cookies) {\r\n    // 获取城市列表\r\n    $http.get('mock/cities/cities.json')\r\n        .then(function(suc) {\r\n            $scope.cities = suc.data;\r\n        }, function(error) {\r\n            console.log(error);\r\n        });\r\n\r\n    // 点击设置城市\r\n    $scope.setCity = function(obj) {\r\n        $rootScope.currentCity = {\r\n            cityname: obj.cityname,\r\n            cityid: obj.cityid\r\n        };\r\n        // 更新cookies and storage\r\n        $cookies.put('cityid', obj.cityid);\r\n        $cookies.put('cityname', obj.cityname);\r\n        window.localStorage.setItem('cityname', obj.cityname);\r\n        window.localStorage.setItem('cityid', obj.cityid);\r\n\r\n        //设置完成后跳转首页\r\n        $location.path('/home');\r\n    };\r\n    //选择省份跳至对应区域\r\n    $scope.scrollTo = function(e) {\r\n        console.log(e);\r\n        console.log(document.getElementById(e));\r\n        // $location.hash(['province'+e,50]);\r\n        $anchorScroll.yOffset = 44;\r\n        $anchorScroll('province' + e);\r\n\r\n    };\r\n}]);\r\n\r\n// info 控制器\r\nmyApp.controller('infoCtrl', [\"$rootScope\", \"$scope\", \"$http\", \"$location\", function($rootScope, $scope, $http, $location) {\r\n    // 进入info页面\r\n    $scope.curInfo = $rootScope.curInfo;\r\n    $rootScope.curInfo = null;\r\n\r\n    //非点击事件传入object\r\n    // 由url进入页面 \r\n    var num = 0;\r\n    // console.log($scope.curInfo);\r\n    if ($scope.curInfo) {\r\n        num = $scope.curInfo.id;\r\n    } else if (!$scope.curInfo && $location.search().infoid) {\r\n        //设置infoid对应obj的值\r\n        num = $location.search().infoid;\r\n    }\r\n    // 由于没有远端数据，对infoid做重定向处理\r\n    // min:53864 max:53914\r\n    if ($location.search().infoid < 53864 || $location.search().infoid > 53914) {\r\n        // 随机一个id\r\n        // alert(9)\r\n        console.log(num, 'num is not in range');\r\n        num = parseInt(Math.random() * 49) + 53864;\r\n        console.log('随机分配infoid:', num);\r\n    }\r\n    $location.search('infoid', num);\r\n    // 获取对应id信息\r\n    $http.get('mock/infos/' + num + '.json').then(function(suc) {\r\n        $scope.curInfo = suc.data;\r\n    }, function(error) {\r\n\r\n    });\r\n    var aImages = [\r\n        [\"mock/img/pre_1484540313t64on.jpg\",\r\n            \"mock/img/pre_1484540343znkl1.JPEG\",\r\n            \"mock/img/pre_1484540364ineji.jpg\",\r\n            \"mock/img/pre_14845404071dgw4.jpg\"\r\n        ],\r\n        [\"mock/img/1484540313t64on.jpg\",\r\n            \"mock/img/1484540343znkl1.JPEG\",\r\n            \"mock/img/1484540364ineji.jpg\",\r\n            \"mock/img/14845404071dgw4.jpg\"\r\n        ]\r\n    ];\r\n    $scope.slides = aImages[0];\r\n    $scope.tapImage = function($event) {\r\n        var oImgCover = document.getElementById('imgCarouselCover');\r\n        if (angular.element(oImgCover).hasClass('fullscreen')) {\r\n            angular.element(oImgCover).removeClass('fullscreen');\r\n            $scope.slides = aImages[0];\r\n        } else {\r\n            angular.element(oImgCover).addClass('fullscreen');\r\n            $scope.slides = aImages[1];\r\n        }\r\n        // slides.addClass('fullscreen')\r\n        // slides.$parent.addClass('fullscreen')\r\n\r\n    };\r\n}]);\r\n","/*search page content*/\r\n/*myApp.directive('search', ['$rootScope', \"$location\", function($rootScope, $location) {\r\n    return {\r\n        restrict: 'AE',\r\n        link: function(scope, ele, attrs, upCtrl) {\r\n            var data = { atid: 323, posttime: 90 };\r\n            $http.post(\"http://www.fzwjg.com/m2/s/index.php?mod=search\", data).then(function(resp) {\r\n                console.log(resp.data)\r\n            }, function(data) {\r\n                console.log(data)                \r\n            })\r\n        }\r\n    };\r\n}]);*/\r\n\r\n/*searchBar*/\r\nmyApp.directive('searchBar', ['$rootScope', \"$location\", \"$templateCache\", function($rootScope, $location, $templateCache) {\r\n    return {\r\n        restrict: 'AE',\r\n        require: '?search',\r\n        templateUrl: 'tpls/searchBar.html',\r\n        link: function(scope, ele, attrs, upCtrl) {\r\n\r\n        }\r\n    };\r\n}]);\r\n\r\n//首页的热门信息与最新信息指令\r\nmyApp.directive('infolist', ['$http', '$q', '$rootScope', function($http, $q, $rootScope) {\r\n    return {\r\n        restrict: 'AE',\r\n        replace: false,\r\n        scope: {},\r\n        templateUrl: 'tpls/infoListOnHome.html',\r\n        link: function(scope) {\r\n            scope.toInfoPage =  $rootScope.toInfoPage\r\n            $http.get('mock/cities/' + Number($rootScope.currentCity.cityid) + '/cityinfo.json')\r\n                .then(function(suc) {\r\n                    scope.cityInfoOnHome = suc.data\r\n                }, function(data) {\r\n                    console.log(data);\r\n                });\r\n        }\r\n    };\r\n}]);\r\n","\nmyApp.config([\"$stateProvider\", \"$urlRouterProvider\",\"$locationProvider\",function($stateProvider, $urlRouterProvider,$locationProvider) {\n    $locationProvider.html5Mode(false);\n    // $locationProvider.hashPrefix()\n    $urlRouterProvider.otherwise('home');\n\n    var indexInIndex = { templateUrl: 'index.html' },\n        headerInhome = { templateUrl: 'tpls/header.html' },\n        footerInhome = { templateUrl: 'tpls/footer.html' };\n    /*首页*/\n    $stateProvider\n        .state('home', {\n            url: '/home',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/main.html'\n                }\n            }\n        })\n        /*search*/\n        .state('search', {\n            url: '/search?:keywords:catid',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/search.html'\n                }\n            }\n        })\n        /*category*/\n        .state('category', {\n            url: '/category',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/category.html'\n                }\n            }\n        })\n        /*usercenter*/\n        .state('usercenter', {\n            url: '/usercenter',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/userCenter.html'\n                }\n            }\n        })\n        /*post*/\n        .state('post', {\n            url: '/post',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/post.html'\n                }\n            }\n        })\n        /*city*/\n        .state('city', {\n            url: '/city',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/city.html'\n                }\n            }\n        })/*city*/\n        .state('info', {\n            url: '/info?infoid',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/info.html'\n                }\n            }\n        })\n}]);\n","myApp.service('updateHomeItem', ['$http', '$q', function($http, $q) {\r\n    //获取最新list\r\n    this.getNewest = function() {\r\n        var d = $q.defer();\r\n        $http({\r\n                method: 'get',\r\n                url: 'mock/aCategorysInHome.json'\r\n            })\r\n            .then(function(suc) {\r\n                d.resolve(suc);\r\n            }, function(faild) {\r\n                d.reject(\"error\");\r\n            });\r\n\r\n        return d.promise;\r\n    };\r\n}]);"]}