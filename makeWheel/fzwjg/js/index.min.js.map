{"version":3,"sources":["App.js","controllers.js","directives.js","router.js","service.js"],"names":["myApp","angular","module","run","$templateCache","put","window","onresize","document","getElementsByTagName","style","fontSize","documentElement","body","clientWidth","arguments","callee","controller","$rootScope","$scope","$swipe","$location","$document","$animate","$timeout","$cookies","$interval","ngDialog","$http","allTag","blacklist","all","i","length","_curTag","_curTagName","nodeType","tagName","toLowerCase","indexOf","href","parentNode","removeChild","e","crc","searchInput","undefined","localStorage","getItem","currentCity","cityid","cityname","console","log","getObject","get","timer","splashTimer","$body","find","aViews","$on","event","toState","toParams","fromState","fromParams","cancel","name","removeClass","addClass","isShowBack","lastState","url","getElementById","display","setHeader","page","param","title","icon","headerTitle","handleSwipeLeft","index","path","replace","handleSwipeRight","footerItems","itemName","srefLink","iconName","updateHomeItem","Storage","aCategorysInHome","JSON","parse","getNewest","then","response","data","error","searchService","search","keywords","catid","open","template","plain","className","overlay","showClose","width","closeAll","isShowFilter","mockDataIndex","suc","searchData","searchMore","concat","cates","isLogIn","$anchorScroll","cities","setCity","obj","expireDate","Date","setDate","getDate","putObject","expires","setItem","scrollTo","yOffset","curInfo","num","id","infoid","parseInt","Math","random","parentid","aImages","slides","tapImage","$event","oImgCover","element","hasClass","username","password","login","otherInfo","directive","restrict","require","templateUrl","link","scope","ele","attrs","upCtrl","$q","toInfoPage","Number","cityInfoOnHome","config","$stateProvider","$urlRouterProvider","$locationProvider","html5Mode","otherwise","indexInIndex","headerInhome","footerInhome","state","views","","header@home","footer@home","content@home","service","this","d","defer","method","resolve","faild","reject","promise"],"mappings":"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","file":"index.min.js","sourcesContent":["// var myApp = angular.module('myApp', ['ngSanitize','ngAnimate', 'ui.router', 'ui.select','ngTouch']);\nvar myApp = angular.module('myApp', ['ngAnimate', 'ui.router', 'ngTouch','ngCookies','angular-carousel','ngDialog']);\n\n// 缓存模板\nmyApp.run([\"$templateCache\", function($templateCache) {\n    $templateCache.put('templateId1', 'tpls/search.html');\n    $templateCache.put('templateId2', 'tpls/category.html');\n    $templateCache.put('templateId3', 'tpls/usercenter.html');\n    $templateCache.put('templateId4', 'tpls/post.html');\n}]);\n//开启rem\nwindow.onresize = (function() {\n    document.getElementsByTagName('html')[0].style.fontSize = (document.documentElement || document.body).clientWidth / 25 + \"px\";\n    return arguments.callee;\n})();\n","// 全局contrl\r\nmyApp.controller('myAppCtrl', [\"$rootScope\", \"$scope\", \"$swipe\", \"$location\", \"$document\", \"$animate\", \"$timeout\", \"$cookies\", \"$interval\", \"ngDialog\", \"$http\",\r\n    function($rootScope, $scope, $swipe, $location, $document, $animate, $timeout, $cookies, $interval, ngDialog, $http) {\r\n\r\n        // 方便全局调用\r\n        $rootScope.ngDialog = ngDialog;\r\n        $rootScope.$timeout = $timeout;\r\n        $rootScope.$location = $location;\r\n        $rootScope.$http = $http;\r\n        $rootScope.$cookies = $cookies;\r\n\r\n        /*反http拦截广告*/\r\n        var allTag = [],\r\n            blacklist = ['baidu', 'winyylg'];\r\n        $interval(function() {\r\n            allTag = document.all;\r\n            for (var i = 0; i < allTag.length; i++) {\r\n                var _curTag = allTag[i],\r\n                    _curTagName = _curTag.nodeType === 1 ? _curTag.tagName.toLowerCase() : 'noTag';\r\n\r\n                if ('aimgscriptiframe'.indexOf(_curTagName) !== -1) {\r\n                    try {\r\n                        if (blacklist.indexOf(_curTag.href) !== -1) {\r\n                            _curTag.parentNode.removeChild(_curTag);\r\n                        }\r\n                    } catch (e) {\r\n                        if (blacklist.indexOf(_curTag.crc) !== -1) {\r\n                            _curTag.parentNode.removeChild(_curTag);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }, 2000);\r\n        /*反http拦截广告结束*/\r\n\r\n        //serach input初始化\r\n        $rootScope.searchInput = '';\r\n\r\n        // 当前城市获取与与设置\r\n        // 判断localstorage\r\n        // 获取登录信息\r\n        if (typeof(Storage) !== undefined && window.localStorage.getItem('cityid') && window.localStorage.getItem('cityname')) {\r\n            $rootScope.currentCity = {\r\n                cityid: window.localStorage.getItem('cityid'),\r\n                cityname: window.localStorage.getItem('cityname')\r\n            };\r\n        } else {\r\n            console.log($rootScope.$cookies.getObject('cityInfo'));\r\n                // 判断cookies\r\n            if ($rootScope.$cookies.getObject('cityInfo')) {\r\n                $rootScope.currentCity = {\r\n                    cityname: $cookies.get('cityname'),\r\n                    cityid: $cookies.get('curCity')\r\n                };\r\n            } else {\r\n                // 设置为总站\r\n                $rootScope.currentCity = {\r\n                    cityid: '00',\r\n                    cityname: '总站'\r\n                };\r\n            }\r\n        }\r\n\r\n        $scope.timer = null;\r\n        $scope.splashTimer = null;\r\n        var $body = $document.find('body');\r\n        var aViews = ['home', 'category', 'usercenter', 'post'];\r\n\r\n        //监听路由改变开始 添加动画\r\n        $scope.$on('$stateChangeStart', function(event, toState, toParams, fromState, fromParams) {\r\n            $timeout.cancel($scope.timer);\r\n            if (fromState.name !== \"\") {\r\n                $body.removeClass('fadeOutAndIn');\r\n                $body.removeClass('fadeInAndOutToRight');\r\n                if (aViews.indexOf(fromState.name) > aViews.indexOf(toState.name)) {\r\n                    // right to left\r\n                    $body.addClass('fadeInAndOutToRight');\r\n                } else if (aViews.indexOf(fromState.name) < aViews.indexOf(toState.name)) {\r\n                    // left to right\r\n                    $body.addClass('fadeOutAndIn');\r\n                } else {\r\n                    $body.addClass('fadeOutAndIn');\r\n                }\r\n\r\n                $scope.timer = $timeout(function() {\r\n                    // clearAll\r\n                    $body.removeClass('fadeOutAndIn');\r\n                    $body.removeClass('fadeInAndOutToRight');\r\n                }, 500);\r\n            }\r\n\r\n            //判断是否显示返回按钮\r\n            if (toState.name === 'home') {\r\n                $timeout(function() {\r\n                    $rootScope.isShowBack = false;\r\n                }, 500);\r\n            } else {\r\n                $rootScope.isShowBack = true;\r\n            }\r\n        });\r\n\r\n        //监听路由改变完成 添加动画\r\n        $scope.$on('$stateChangeSuccess', function(event, toState, toParams, fromState, fromParams) {\r\n            // 路由change完成后更新存储 but the login page\r\n            if (toState.name !== 'login') {\r\n                $rootScope.lastState = $location.url();\r\n            }\r\n\r\n            $timeout.cancel($scope.splashTimer);\r\n            // 关闭loading动画遮罩\r\n            $scope.splashTimer = $timeout(function() {\r\n                document.getElementById('splash').style.display = \"none\";\r\n            }, 1000);\r\n        });\r\n\r\n        $rootScope.setHeader = function(page, param) {\r\n            switch (page) {\r\n                case 'home':\r\n                    param = { title: '服装微加工', icon: 'icon-wjg-tb' };\r\n                    break;\r\n                case 'category':\r\n                    param = { title: '分类', icon: 'icon-iconfenlei' };\r\n                    break;\r\n                case 'usercenter':\r\n                    param = { title: '用户中心', icon: 'icon-icon iconfont icon-gerenzhongxin' };\r\n                    break;\r\n                case 'city':\r\n                    param = { title: '选择城市', icon: 'icon-wjg-dt' };\r\n                    break;\r\n                case 'post':\r\n                    param = { title: '发布', icon: 'icon-icon-fabu' };\r\n                    break;\r\n                case 'search':\r\n                    param = { title: '搜索', icon: 'icon-sousuo' };\r\n                    break;\r\n                case 'custom':\r\n                    param = param;\r\n                    break;\r\n                default:\r\n                    'home';\r\n                    break;\r\n            }\r\n\r\n            $timeout(function() {\r\n                $rootScope.headerTitle = param;\r\n            }, 200);\r\n        };\r\n        //滑动页面时的路由处理\r\n        $scope.handleSwipeLeft = function() {\r\n            var index = aViews.indexOf($location.path().replace('\\/', ''));\r\n            if (index === -1) {\r\n                return false;\r\n            }\r\n            if (index !== 3) {\r\n                // 往左滑动，页面往右+1\r\n                $location.path(aViews[index + 1]);\r\n            } else {\r\n                $location.path(aViews[0]);\r\n            }\r\n        };\r\n\r\n        $scope.handleSwipeRight = function() {\r\n            var index = aViews.indexOf($location.path().replace('\\/', ''));\r\n            if (index === -1) {\r\n                return false;\r\n            }\r\n            if (index !== 0) {\r\n                // 往左滑动，页面往右+1\r\n                $location.path(aViews[index - 1]);\r\n            } else {\r\n                $location.path(aViews[aViews.length - 1]);\r\n            }\r\n        };\r\n        // footer 四个item\r\n        $scope.footerItems = [{\r\n            itemName: \"首页\",\r\n            srefLink: \"home\",\r\n            iconName: \"icon-shouye\"\r\n        }, {\r\n            itemName: \"分类\",\r\n            srefLink: \"category\",\r\n            iconName: \"icon-iconfenlei\"\r\n        }, {\r\n            itemName: \"用户中心\",\r\n            srefLink: \"usercenter\",\r\n            iconName: \"icon-gerenzhongxin\"\r\n        }, {\r\n            itemName: \"发布\",\r\n            srefLink: \"post\",\r\n            iconName: \"icon-fabu\"\r\n        }];\r\n\r\n\r\n    }\r\n]);\r\n//  home页的content控制器\r\nmyApp.controller('homeCtrl', [\"$rootScope\", \"$scope\", \"updateHomeItem\", function($rootScope, $scope, updateHomeItem) {\r\n    // header中央的文字与图标初始化\r\n    $rootScope.setHeader('home');\r\n    // 为了在页面进入home时清除url参数\r\n    $rootScope.$location.url('home');\r\n\r\n    // 获取首页八个大类信息\r\n    if ((typeof Storage) !== undefined && window.localStorage.aCategorysInHome) {\r\n        console.log('进入页面后找寻本地存储进行赋值');\r\n        $scope.aCategorysInHome = JSON.parse(window.localStorage.aCategorysInHome);\r\n        console.log($scope.aCategorysInHome);\r\n    }\r\n\r\n    // 通过service获取最新list\r\n    updateHomeItem.getNewest().then(function(response) {\r\n        if (response) {\r\n            $scope.aCategorysInHome = response.data;\r\n        }\r\n    }, function(error) {\r\n        console.log('获取错误');\r\n    });\r\n}]);\r\n\r\n// search 控制器\r\nmyApp.controller('searchCtrl', [\"$rootScope\", \"$scope\", \"searchService\", function($rootScope, $scope, searchService) {\r\n    // header中央的文字\r\n    $rootScope.setHeader('search');\r\n\r\n    // 进入search页面后为输入框添加url内的keywords\r\n    if ($rootScope.$location.search().keywords && $rootScope.$location.search().keywords.length) {\r\n        $rootScope.searchInput = $rootScope.$location.search().keywords;\r\n    }\r\n    if ($rootScope.$location.search().catid && $rootScope.$location.search().catid.length) {\r\n\r\n        // $scope.catid = $location.search().catid;\r\n    }\r\n    //提示没有远端数据\r\n    $rootScope.ngDialog.open({\r\n        template: '<p>本地没有对应分类信息</p><p>跳转至总分类</p>',\r\n        plain: true,\r\n        className: 'ngdialog-theme-default',\r\n        overlay: false,\r\n        showClose: false,\r\n        width: 'auto'\r\n    });\r\n    $rootScope.$timeout(function() {\r\n        $rootScope.ngDialog.closeAll();\r\n    }, 2000);\r\n\r\n    $scope.isShowFilter = true;\r\n    $scope.catid = 0;\r\n    //使用本地假数据\r\n    $rootScope.$location.search('catid', '0');\r\n    //当前获取次数\r\n    var mockDataIndex = 0;\r\n    searchService(mockDataIndex).then(function(suc) {\r\n        $scope.searchData = suc.data;\r\n    }, function() {\r\n\r\n    });\r\n    $scope.searchMore = function() {\r\n        ++mockDataIndex;\r\n        if (mockDataIndex === 9) {\r\n            mockDataIndex = 8;\r\n            console.log('mo more info ');\r\n            return false;\r\n        } else {\r\n            searchService(mockDataIndex).then(function(suc) {\r\n                $scope.searchData = $scope.searchData.concat(suc.data);\r\n            }, function() {\r\n\r\n            });\r\n        }\r\n    };\r\n}]);\r\n\r\n// category 控制器\r\nmyApp.controller('categoryCtrl', [\"$rootScope\", \"$scope\", function($rootScope, $scope) {\r\n    $rootScope.setHeader('category');\r\n\r\n    $rootScope.$http.get('mock/cates.json').then(function(suc) {\r\n        $scope.cates = suc.data;\r\n    }, function(error) {\r\n\r\n    });\r\n}]);\r\n\r\n// usercenter 控制器\r\nmyApp.controller('usercenterCtrl', [\"$rootScope\", \"$scope\", function($rootScope, $scope) {\r\n    $rootScope.setHeader('usercenter');\r\n    if (!$rootScope.isLogIn) {\r\n        $rootScope.ngDialog.open({\r\n            template: '<p>请先登录！</p>',\r\n            plain: true,\r\n            className: 'ngdialog-theme-default',\r\n            overlay: false,\r\n            showClose: false,\r\n            width: 'auto'\r\n        });\r\n        $rootScope.$timeout(function() {\r\n            $rootScope.ngDialog.closeAll();\r\n        }, 2000);\r\n    }\r\n\r\n}]);\r\n\r\n// post 控制器\r\nmyApp.controller('postCtrl', [\"$rootScope\", \"$scope\", function($rootScope, $scope) {\r\n    $rootScope.setHeader('post');\r\n    //进入发布页面，判断是否登陆。\r\n    if (!$rootScope.isLogIn) {\r\n        $rootScope.ngDialog.open({\r\n            template: '<p>请先登录！</p>',\r\n            plain: true,\r\n            className: 'ngdialog-theme-default',\r\n            overlay: false,\r\n            showClose: false,\r\n            width: 'auto'\r\n        });\r\n        $rootScope.$timeout(function() {\r\n            $rootScope.ngDialog.closeAll();\r\n        }, 2000);\r\n\r\n        $rootScope.$location.path('/login');\r\n    }\r\n}]);\r\n//  城市选择页的content控制器\r\nmyApp.controller('cityCtrl', [\"$rootScope\", \"$scope\", \"$anchorScroll\", function($rootScope, $scope, $anchorScroll) {\r\n    $rootScope.setHeader('city');\r\n\r\n    // 获取城市列表\r\n    $rootScope.$http.get('mock/cities/cities.json')\r\n        .then(function(suc) {\r\n            $scope.cities = suc.data;\r\n        }, function(error) {});\r\n\r\n    // 点击设置城市\r\n    $scope.setCity = function(obj) {\r\n        $rootScope.currentCity = {\r\n            cityname: obj.cityname,\r\n            cityid: obj.cityid\r\n        };\r\n        // 更新cookies and storage\r\n        var expireDate = new Date();\r\n        // 过期时间为一天\r\n        expireDate.setDate(expireDate.getDate() + 1);\r\n\r\n        $rootScope.$cookies.putObject('cityInfo', {\r\n            cityid: obj.cityid,\r\n            cityname: obj.cityname\r\n        }, {\r\n            // path :'',\r\n            // domain :'127.0.0.1',\r\n            // secure: true,\r\n            expires: expireDate\r\n        });\r\n        window.localStorage.setItem('cityname', obj.cityname);\r\n        window.localStorage.setItem('cityid', obj.cityid);\r\n\r\n        //设置完成后跳转首页\r\n        $rootScope.$location.path('/home');\r\n    };\r\n    //选择省份跳至对应区域\r\n    $scope.scrollTo = function(e) {\r\n        // $location.hash(['province'+e,50]);\r\n        $anchorScroll.yOffset = 44;\r\n        $anchorScroll('province' + e);\r\n\r\n    };\r\n}]);\r\n\r\n// info 控制器\r\nmyApp.controller('infoCtrl', [\"$rootScope\", \"$scope\", function($rootScope, $scope) {\r\n    // 进入info页面\r\n    $scope.curInfo = $rootScope.curInfo;\r\n    $rootScope.curInfo = null;\r\n\r\n    //非点击事件传入object\r\n    // 由url进入页面 \r\n    var num = 0;\r\n    if ($scope.curInfo) {\r\n        num = $scope.curInfo.id;\r\n    } else if (!$scope.curInfo && $rootScope.$location.search().infoid) {\r\n        //设置infoid对应obj的值\r\n        num = $rootScope.$location.search().infoid;\r\n    }\r\n    // 由于没有远端数据，对infoid做重定向处理\r\n    // min:53864 max:53914\r\n    if ($rootScope.$location.search().infoid < 53864 || $rootScope.$location.search().infoid > 53914) {\r\n        // 随机一个id\r\n        // alert(9)\r\n        if (!$rootScope.isLogIn) {\r\n            $rootScope.ngDialog.open({\r\n                template: '<p>假数据不存在，随机重定向</p>',\r\n                plain: true,\r\n                className: 'ngdialog-theme-default',\r\n                overlay: false,\r\n                showClose: false,\r\n                width: 'auto'\r\n            });\r\n            $rootScope.$timeout(function() {\r\n                $rootScope.ngDialog.closeAll();\r\n            }, 2000);\r\n        }\r\n        console.log(num, 'num is not in range');\r\n        num = parseInt(Math.random() * 49) + 53864;\r\n        console.log('随机分配infoid:', num);\r\n    }\r\n    $rootScope.$location.search('infoid', num);\r\n    // 获取对应id信息\r\n    $rootScope.$http.get('mock/infos/' + num + '.json').then(function(suc) {\r\n        $scope.curInfo = suc.data;\r\n        var icon = 'icon';\r\n        switch ($scope.curInfo.parentid) {\r\n            case 246:\r\n                icon = \"icon-waifajiagong\";\r\n                break;\r\n            case 264:\r\n                icon = \"icon-chengjiejiagong\";\r\n                break;\r\n            case 299:\r\n                icon = \"icon-shebeizurangweixiu\";\r\n                break;\r\n            case 309:\r\n                icon = \"icon-chengpinkucun\";\r\n                break;\r\n            case 323:\r\n                icon = \"icon-changfangzurang\";\r\n                break;\r\n            case 327:\r\n                icon = \"icon-mianfuliaogongqiu\";\r\n                break;\r\n            case 338:\r\n                icon = \"icon-zhaopin\";\r\n                break;\r\n            case 367:\r\n                icon = \"icon-qiuzhi\";\r\n                break;\r\n            default:\r\n                icon = \"icon-wjg-tb\";\r\n        }\r\n        $rootScope.setHeader('custom', { title: suc.data.title, icon: icon });\r\n\r\n    }, function(error) {\r\n\r\n    });\r\n\r\n\r\n    var aImages = [\r\n        [\"mock/img/pre_1484540313t64on.jpg\",\r\n            \"mock/img/pre_1484540343znkl1.JPEG\",\r\n            \"mock/img/pre_1484540364ineji.jpg\",\r\n            \"mock/img/pre_14845404071dgw4.jpg\"\r\n        ],\r\n        [\"mock/img/1484540313t64on.jpg\",\r\n            \"mock/img/1484540343znkl1.JPEG\",\r\n            \"mock/img/1484540364ineji.jpg\",\r\n            \"mock/img/14845404071dgw4.jpg\"\r\n        ]\r\n    ];\r\n    //使用第一组小图片提高速度\r\n    $scope.slides = aImages[0];\r\n\r\n    // 点击图片时全屏toggle\r\n    $scope.tapImage = function($event) {\r\n        var oImgCover = document.getElementById('imgCarouselCover');\r\n        if (angular.element(oImgCover).hasClass('fullscreen')) {\r\n            angular.element(oImgCover).removeClass('fullscreen');\r\n            $scope.slides = aImages[0];\r\n        } else {\r\n            angular.element(oImgCover).addClass('fullscreen');\r\n            $scope.slides = aImages[1];\r\n        }\r\n    };\r\n}]);\r\n// login 控制器\r\nmyApp.controller('loginCtrl', [\"$rootScope\", \"$scope\", function($rootScope, $scope) {\r\n    $rootScope.setHeader('custom', { title: '登录', icon: 'icon-icon iconfont icon-gerenzhongxin' });\r\n    /*测试用账号与密码*/\r\n    $scope.username = \"testUserName\";\r\n    $scope.password = \"testPassword\";\r\n    $scope.login = function() {\r\n        if ($scope.username === \"testUserName\" && $scope.password === \"testPassword\") {\r\n            //更新全局状态\r\n            $rootScope.isLogIn = true;\r\n\r\n            //设置cookies and localstorage\r\n            var expireDate = new Date();\r\n            // 过期时间为一天\r\n            expireDate.setDate(expireDate.getDate() + 1);\r\n            $rootScope.$cookies.putObject('userInfo', {\r\n                isLogIn: true,\r\n                otherInfo: 'none'\r\n            }, {\r\n                // path :'',\r\n                // domain :'127.0.0.1',\r\n                // secure: true,\r\n                expires: expireDate\r\n            });\r\n\r\n            if (typeof(Storage) !== undefined && window.localStorage.getItem('cityid') && window.localStorage.getItem('cityname')) {\r\n                window.localStorage.setItem('isLogIn',true)\r\n            }\r\n            // 判断cookies\r\n            // if ($cookies.get('cityid') && $cookies.get('cityname')) {\r\n\r\n            // 没有上一页信息\r\n            if (!$rootScope.lastState) {\r\n                //跳转至用户中心\r\n                $rootScope.$location.url('usercenter');\r\n            } else {\r\n                $rootScope.$location.url($rootScope.lastState);\r\n            }\r\n        }\r\n    };\r\n}]);\r\n// report 控制器\r\nmyApp.controller('reportCtrl', [\"$rootScope\", \"$scope\", function($rootScope, $scope) {\r\n    $rootScope.setHeader('custom', { title: \"举报\", icon: \"icon-wjg-tb\" });\r\n        //未登录时跳转登录\r\n    if (!$rootScope.isLogIn) {\r\n        $rootScope.$location.url('/login');\r\n    }\r\n}]);\r\n","/*searchBar*/\r\nmyApp.directive('searchBar', ['$rootScope', \"$location\", \"$templateCache\", function($rootScope, $location, $templateCache) {\r\n    return {\r\n        restrict: 'AE',\r\n        require: '?search',\r\n        replace:true,\r\n        templateUrl: 'tpls/searchBar.html',\r\n        link: function(scope, ele, attrs, upCtrl) {\r\n            \r\n        }\r\n    };\r\n}]);\r\n\r\n//首页的热门信息与最新信息指令\r\nmyApp.directive('infolist', ['$http', '$q', '$rootScope', function($http, $q, $rootScope) {\r\n    return {\r\n        restrict: 'AE',\r\n        replace: false,\r\n        scope: {},\r\n        templateUrl: 'tpls/infoListOnHome.html',\r\n        link: function(scope) {\r\n            scope.toInfoPage =  $rootScope.toInfoPage\r\n            $http.get('mock/cities/' + Number($rootScope.currentCity.cityid) + '/cityinfo.json')\r\n                .then(function(suc) {\r\n                    scope.cityInfoOnHome = suc.data\r\n                }, function(data) {\r\n                    console.log(data);\r\n                });\r\n        }\r\n    };\r\n}]);\r\n","\nmyApp.config([\"$stateProvider\", \"$urlRouterProvider\",\"$locationProvider\",function($stateProvider, $urlRouterProvider,$locationProvider) {\n    $locationProvider.html5Mode(false);\n    // $locationProvider.hashPrefix()\n    $urlRouterProvider.otherwise('home');\n\n    var indexInIndex = { templateUrl: 'index.html' },\n        headerInhome = { templateUrl: 'tpls/header.html' },\n        footerInhome = { templateUrl: 'tpls/footer.html' };\n    /*首页*/\n    $stateProvider\n        .state('home', {\n            url: '/home',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/main.html'\n                }\n            }\n        })\n        /*search*/\n        .state('search', {\n            url: '/search?:keywords:catid',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/search.html'\n                }\n            }\n        })\n        /*category*/\n        .state('category', {\n            url: '/category',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/category.html'\n                }\n            }\n        })\n        /*usercenter*/\n        .state('usercenter', {\n            url: '/usercenter',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/userCenter.html'\n                }\n            }\n        })\n        /*post*/\n        .state('post', {\n            url: '/post',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/post.html'\n                }\n            }\n        })\n        /*city*/\n        .state('city', {\n            url: '/city',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/city.html'\n                }\n            }\n        })\n        /*info*/\n        .state('info', {\n            url: '/info?infoid',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/info.html'\n                }\n            }\n        })\n        /*login*/\n        .state('login', {\n            url: '/login',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/login.html'\n                }\n            }\n        })\n        /*register*/\n        .state('register', {\n            url: '/register',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/reg.html'\n                }\n            }\n        })\n        /*report*/\n        .state('report', {\n            url: '/report?infoid',\n            views: {\n                '': indexInIndex,\n                'header@home': headerInhome,\n                'footer@home': footerInhome,\n                'content@home': {\n                    templateUrl: 'tpls/report.html'\n                }\n            }\n        })\n}]);\n","myApp.service('updateHomeItem', ['$http', '$q', function($http, $q) {\r\n    //获取最新list\r\n    this.getNewest = function() {\r\n        var d = $q.defer();\r\n        $http({\r\n                method: 'get',\r\n                url: 'mock/aCategorysInHome.json'\r\n            })\r\n            .then(function(suc) {\r\n                d.resolve(suc);\r\n            }, function(faild) {\r\n                d.reject(\"error\");\r\n            });\r\n\r\n        return d.promise;\r\n    };\r\n}]);\r\n\r\nmyApp.service('searchService', ['$http', '$q', function($http, $q) {\r\n    return function(mockDataIndex) {\r\n        var d = $q.defer();\r\n\r\n        $http.get('mock/search/cate' + mockDataIndex + '.json')\r\n            .then(function(suc) {\r\n                d.resolve(suc);\r\n            }, function() {\r\n                d.reject(\"error\");\r\n            })            \r\n        return d.promise;\r\n    }\r\n}]);\r\n"]}